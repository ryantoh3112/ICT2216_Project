{# templates/venue/details.html.twig #}

{% extends 'base.html.twig' %}

{% block body %}
<style>
    .banner-img {
        height: 350px;
        object-fit: cover;
        filter: brightness(60%);
    }

    .banner-overlay {
        z-index: 2;
        color: white;
    }

    @media (max-width: 768px) {
        .banner-img {
            height: 250px;
        }

        .banner-overlay h1 {
            font-size: 1.75rem;
        }

        .banner-overlay p {
            font-size: 1rem;
        }
    }
</style>

    <section class="venue-banner" style="position: relative; height: 500px; overflow: hidden;">
        {% if venue.image %}
            <img src="{{ asset(venue.image) }}" alt="{{ venue.name }}" style="width: 100%; height: 100%; object-fit: cover; filter: brightness(0.4);">
        {% else %}
            <img src="{{ asset('images/placeholder.jpg') }}" alt="{{ venue.name }}" style="width: 100%; height: 100%; object-fit: cover; filter: brightness(0.4);">
        {% endif %}
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
            <h1 style="font-size: 4rem;">{{ venue.name }}</h1>
            <p style="font-size: 1.2rem;">{{ venue.address }}</p>
        </div>
    </section>

    <section class="about_section layout_padding">
        <div class="container">
            <div class="heading_container heading_center">
                <h2>About the Venue</h2>
            </div>
            <div class="row">
                <div class="col-md-8 offset-md-2 text-center">
                    {% if venue.description %}
                        <p>{{ venue.description }}</p>
                    {% else %}
                        <p>No description provided for this venue.</p>
                    {% endif %}
                    <br>
                    <p><strong>Capacity:</strong> {{ venue.capacity ?: 'Not specified' }}</p>
                    <p><strong>Address:</strong> {{ venue.address }}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- events section -->
    <section class="event_section layout_padding">
        <div class="container">
            <div class="heading_container heading_center mb-4">
                <h2>Events at {{ venue.name }}</h2>
            </div>

            <div class="row">
                {% if events is not empty %}
                    {% for event in events %}
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="box flex-fill">
                                <div class="img-box mb-2 ratio ratio-4x3 overflow-hidden rounded">
                                    <img src="{{ asset(event.imagepath ?: 'images/events.jpg') }}"
                                        alt="Event Image"
                                        class="img-fluid w-100 h-100 object-fit-cover">
                                </div>
                                <div class="detail-box">
                                    <h5 class="fw-bold">{{ event.name }}</h5>

                                    {% if event.purchaseStartDate and event.purchaseEndDate %}
                                        <p class="text-muted small">
                                            {{ event.purchaseStartDate|date('d M Y (D)') }}
                                            {% if event.purchaseStartDate != event.purchaseEndDate %}
                                                ~ {{ event.purchaseEndDate|date('d M Y (D)') }}
                                            {% endif %}
                                        </p>
                                    {% endif %}

                                    <a href="{{ path('event_show', { id: event.id }) }}" class="btn btn-outline-primary">View More</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="col-12 text-center">
                        <p class="lead mt-4">There are currently no events available at this venue.</p>
                        <a href="{{ path('event_list') }}" class="btn btn-outline-secondary mt-2">Browse All Events</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
{% endblock %}